<!-- Task Creation Modal -->
<div id="task-modal" class="modal-overlay" onclick="closeModalOnOverlay(event)">
    <div class="modal">
        <div class="modal-header">
            <h2 class="modal-title">Create New Task</h2>
            <button class="modal-close" onclick="closeTaskModal()">&times;</button>
        </div>

        <div class="tabs">
            <button class="tab active" onclick="switchTab('natural')">Natural Language</button>
            <button class="tab" onclick="switchTab('structured')">Structured Form</button>
        </div>

        <!-- Natural Language Tab -->
        <div id="natural-tab" class="tab-content active">
            <form id="natural-form" onsubmit="submitNaturalTask(event)">
                <div class="form-group">
                    <label class="form-label">Describe your task in plain English</label>
                    <textarea
                        id="natural-text"
                        class="form-textarea"
                        placeholder="HIGH priority: Fix login bug in auth.py. Should take 30m"
                        required
                        style="min-height: 150px;"
                    ></textarea>
                    <div class="form-hint">
                        Tips: Include priority (LOW, MEDIUM, HIGH, CRITICAL), duration (e.g., "30m", "2h"), and file names if relevant
                    </div>
                </div>

                <div class="form-actions">
                    <button type="submit" class="btn btn-primary" id="natural-submit">Create Task</button>
                    <button type="button" class="btn btn-secondary" onclick="closeTaskModal()">Cancel</button>
                </div>
            </form>
        </div>

        <!-- Structured Form Tab -->
        <div id="structured-tab" class="tab-content">
            <form id="structured-form" onsubmit="submitStructuredTask(event)">
                <div class="form-group">
                    <label class="form-label">Task ID</label>
                    <input
                        type="text"
                        id="task-id"
                        class="form-input"
                        placeholder="my-task"
                        pattern="[a-z0-9-]+"
                        required
                    />
                    <div class="form-hint">Lowercase letters, numbers, and hyphens only</div>
                </div>

                <div class="form-group">
                    <label class="form-label">Description *</label>
                    <textarea
                        id="task-description"
                        class="form-textarea"
                        placeholder="What should the agent do?"
                        required
                    ></textarea>
                </div>

                <div class="form-group">
                    <label class="form-label">Priority *</label>
                    <select id="task-priority" class="form-select" required>
                        <option value="low">Low</option>
                        <option value="medium" selected>Medium</option>
                        <option value="high">High</option>
                        <option value="critical">Critical</option>
                    </select>
                </div>

                <div class="form-group">
                    <label class="form-label">Estimated Duration *</label>
                    <input
                        type="text"
                        id="task-duration"
                        class="form-input"
                        placeholder="1h"
                        pattern="\d+[hm](\d+m)?"
                        required
                    />
                    <div class="form-hint">Format: "30m", "2h", or "1h30m"</div>
                </div>

                <div class="form-group">
                    <label class="form-label">Context (Optional)</label>
                    <textarea
                        id="task-context"
                        class="form-textarea"
                        placeholder="Additional background information..."
                    ></textarea>
                </div>

                <div class="form-group">
                    <label class="form-label">Focus Files (Optional)</label>
                    <input
                        type="text"
                        id="task-focus-files"
                        class="form-input"
                        placeholder="auth.py, user.py, tests/test_auth.py"
                    />
                    <div class="form-hint">Comma-separated list of files</div>
                </div>

                <div class="form-group">
                    <label class="form-label">Success Criteria (Optional)</label>
                    <textarea
                        id="task-success"
                        class="form-textarea"
                        placeholder="- All tests pass&#10;- No breaking changes"
                    ></textarea>
                </div>

                <div class="form-group">
                    <div class="checkbox-group">
                        <input type="checkbox" id="task-create-pr" checked />
                        <label for="task-create-pr" class="form-label" style="margin: 0;">Create Pull Request on completion</label>
                    </div>
                </div>

                <div class="form-group" id="pr-title-group">
                    <label class="form-label">PR Title</label>
                    <input
                        type="text"
                        id="task-pr-title"
                        class="form-input"
                        placeholder="feat: Implement new feature"
                    />
                </div>

                <div class="form-actions">
                    <button type="submit" class="btn btn-primary" id="structured-submit">Create Task</button>
                    <button type="button" class="btn btn-secondary" onclick="closeTaskModal()">Cancel</button>
                </div>
            </form>
        </div>
    </div>
</div>

